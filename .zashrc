# vim:filetype=sh
# bash, zsh共通設定

#export PAGER=/usr/local/share/vim/vim73/macros/less.sh
#export PAGER=less
# lessで色つきの表示に対応させる
#export LESS='-R'
#export LESS='-M' 
#export LESSOPEN="| /usr/bin/lesspipe.sh %s"
#export LESSCLOSE="/usr/bin/lesspipe.sh %s %s"

# alias
if [ `uname` = FreeBSD ];then
    export LSCOLORS=exfxcxdxbxegedabagacad
    alias ls='ls -G'
else
    alias ls='ls --color'
fi

alias l='ls'
alias ll='ls -l'
alias la='ls -a'
alias lla='ls -la'
alias grep='grep --color=auto'
alias vi='vim'
alias vie='vim -R' #readonlyで開く。view
# カレントディレクトリのファイル名をFull Pathで表示
alias fp='find `pwd` -maxdepth 1 -mindepth 1'

alias tmux='tmux -2'

# PATHの設定
# $HOME/binがPATHになければ追加。シェルスクリプトなどを置くフォルダ
if echo $PATH | grep "\(^\|:\)${HOME}/bin\($\|:\)" 1>/dev/null 2>&1
then
    : #ヌルコマンド（何もしない）
else
    export PATH="$HOME/bin:$PATH"
fi

# $HOME/git/dotfiles/binがPATHになければ追加。GitHubに上げているスクリプトが入っているフォルダ
if echo $PATH | grep "\(^\|:\)${HOME}/git/dotfiles/bin\($\|:\)" 1>/dev/null 2>&1
then
    : #ヌルコマンド（何もしない）
else
    export PATH="$HOME/git/dotfiles/bin:$PATH"
fi

# $HOME/local/binがPATHになければ追加。makeで作った実行ファイルを置くフォルダ
if echo $PATH | grep "\(^\|:\)${HOME}/local/bin\($\|:\)" 1>/dev/null 2>&1
then
    : #ヌルコマンド（何もしない）
else
    export PATH="$HOME/local/bin:$PATH"
fi


#manのpagerとしてvimの:Manを使う。
#.vimrcにも設定が必要
#http://vim.wikia.com/wiki/Using_vim_as_a_man-page_viewer_under_Unix
export PAGER="/bin/sh -c \"unset PAGER;col -b -x | \
    vim -R -c 'set ft=man nomod nolist' -c 'map q :q<CR>' \
    -c 'map <SPACE> <C-D>' -c 'map b <C-U>' \
    -c 'nmap K :Man <C-R>=expand(\\\"<cword>\\\")<CR><CR>' -\""

#screenがインストールされていて、Screenを起動していないときは自動起動
#ただし、.screenrcでterm xterm-256colorと設定しているとする
if [ $TERM != 'xterm-256color' ];then 
    # すでに screen セッションがある場合そこに接続し、なければ作成する
    # screenがないときのエラーは/dev/nullに送る
    screen -RU 2>/dev/null
fi

if [ -f ~/.zashrc.local ]; then
    . ~/.zashrc.local
fi
