set formatoptions=q
set guifont=Consolas:h10
set guifontwide=MS_Gothic

set guioptions&
" ツールバーを削除
set guioptions-=T
" メニューを削除
set guioptions-=m
" 右スクロールバーを非表示
set guioptions-=r
" 左スクロールバーを非表示
set guioptions-=L
" guitablabelを使わない
set guioptions-=e
" 'a'に似ているが、コマンドラインで選択したときか、CTRL+SHIFTを押しながらマウスで選択したときに共有のクリップボードを使用する。
" Ctrl+Shiftでステータスラインの文字列もクリップボードに保存できる
set guioptions+=A
" ポップアップダイアログではなく、コンソールダイアログを使う
set guioptions+=c

" Windowsのgvimのメニューの文字化け対応
source $VIMRUNTIME/delmenu.vim
source $VIMRUNTIME/menu.vim

" Alt+でメニューをフォーカスしない
set winaltkeys=no
" Alt+Spaceでウィンドウのシステムメニュー
nnoremap <silent> <M-Space> :<C-u>simalt ~<CR>

" insert modeとsearchでIME OFF
set iminsert=0
set imsearch=0

inoremap <A-v> <C-o>:set paste<CR><C-r>*<C-o>:set nopaste<CR>
cnoremap <A-v> <C-r>*
xnoremap <A-c> "*y
nnoremap <A-a> ggVG

" mouse {{{
" ==============================================================================
" Show popup menu if right click.
set mousemodel=popup

" Don't focus the window when the mouse pointer is moved.
set nomousefocus
" Hide mouse pointer on insert mode.
set nomousehide
" }}}

" ウィンドウの位置とサイズを記憶する {{{
" ==============================================================================
" http://vim-users.jp/2010/01/hack120/
let g:save_window_file = expand('~/.vim.d/.vimwinpos')
augroup SaveWindow
  autocmd!
  autocmd VimLeavePre * call s:save_window()
  function! s:save_window()
    let options = [
      \ 'set columns=' . &columns,
      \ 'set lines=' . &lines,
      \ 'winpos ' . getwinposx() . ' ' . getwinposy(),
      \ ]
    call writefile(options, g:save_window_file)
  endfunction
augroup END

if filereadable(g:save_window_file)
  execute 'source' g:save_window_file
endif
